var _get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(e===void 0){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var PScroll=function(a){"use strict";function b(a){var b=[];return x.set(a,b),b}function c(a){x.delete(a)}function d(a){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return x.get(a)||(c?b(a):null)}function e(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e=x.get(a);if(!e)return[];var f,g=[],h=!0,i=!1;try{for(var j,k,l=e[Symbol.iterator]();!(h=(j=l.next()).done);h=!0)k=j.value,k.match(b,c,d)&&g.push(k)}catch(a){i=!0,f=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw f}}return g}function f(a,b,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;if(!c)return void console.log("event.js: addEventListener callback is null! (ignored)");if(v(a)){var g,h=!0,i=!1;try{for(var j,k,l=a[Symbol.iterator]();!(h=(j=l.next()).done);h=!0)k=j.value,f(k,b,c,e)}catch(a){i=!0,g=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw g}}return a}if(w(b)){var m,n=!0,o=!1;try{for(var p,q,r=b.split(/\s/)[Symbol.iterator]();!(n=(p=r.next()).done);n=!0)q=p.value,f(a,q,c,e)}catch(a){o=!0,m=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw m}}return a}new A(d(a,!0),b,c,e);return a}function g(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return d.max=1,f(a,b,c,d)}function h(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(v(a)){var f,g=!0,i=!1;try{for(var j,k,l=a[Symbol.iterator]();!(g=(j=l.next()).done);g=!0)k=j.value,h(k,b,c)}catch(a){i=!0,f=a}finally{try{!g&&l.return&&l.return()}finally{if(i)throw f}}return a}if(w(b)){var m,n=!0,o=!1;try{for(var p,q,r=b.split(/\s/)[Symbol.iterator]();!(n=(p=r.next()).done);n=!0)q=p.value,h(a,b,c)}catch(a){o=!0,m=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw m}}return a}var s,t=!0,u=!1;try{for(var x,y,z=e(a,b,c,d)[Symbol.iterator]();!(t=(x=z.next()).done);t=!0)y=x.value,y.kill()}catch(a){u=!0,s=a}finally{try{!t&&z.return&&z.return()}finally{if(u)throw s}}return a}function i(a){var b=x.get(a);if(!b)return a;for(;b.length;)b.pop().kill();return c(a),a}function j(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!a||!b)return a;if(v(a)){var d,f=!0,g=!1;try{for(var h,i,k=a[Symbol.iterator]();!(f=(h=k.next()).done);f=!0)i=h.value,j(i,b,c)}catch(a){g=!0,d=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw d}}return a}if(!x.has(a)&&!b.propagateTo&&(!c||!c.propagateTo))return a;if("string"==typeof b){if(w(b)){var l,m=!0,n=!1;try{for(var o,p,q=b.split(/\s/)[Symbol.iterator]();!(m=(o=q.next()).done);m=!0)p=o.value,j(a,p,c)}catch(a){n=!0,l=a}finally{try{!m&&q.return&&q.return()}finally{if(n)throw l}}return a}return j(a,new z(a,b,c))}b.currentTarget=a;var r,s=e(a,b.type).sort(function(a,b){return b.priority-a.priority}),t=!0,u=!1;try{for(var y,A,B=s[Symbol.iterator]();!(t=(y=B.next()).done)&&(A=y.value,A.call(b),!b.canceled);t=!0);}catch(a){u=!0,r=a}finally{try{!t&&B.return&&B.return()}finally{if(u)throw r}}return b.propagateTo&&j(b.propagateTo(b.currentTarget),b),a}function k(a,b){a.hasTrigger=!0,a.dispatchEvent(b)}function l(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]&&arguments[3];a.hasTrigger=!1;var e=a.state_old=a.state;a.state=b,a.local_old=a.local,a.local=c,b!==e&&((0>=b&&0<e||0<=b&&0>e)&&k(a,"touch"),0===b&&0!==e&&k(a,"enter"),0!==b&&0===e&&k(a,"exit"),(0>b&&0<=e||0<b&&0>=e)&&k(a,"leave")),(a.hasTrigger||d)&&a.dispatchEvent("update")}function m(a,b){var c=a._position,d=c-b.position,e=d<-b.margin?-1:d>b.margin?1:0;l(b,e,d)}function n(a,b){var c=a._position,d=a._position_old,e=b.stopMin.position,f=b.stopMax.position,g=f-e,h=(c-e)/g,i=(d-e)/g,j=0>h?0:1<h?1:h,k=h<-b.margin/g?-1:h>1+b.margin/g?1:0;l(b,k,j,0<=h&&1>=h||0<=i&&1>=i)}function o(){requestAnimationFrame(o);var a,b=!0,c=!1;try{for(var d,e,f=L[Symbol.iterator]();!(b=(d=f.next()).done);b=!0)e=d.value,e.started&&e.update()}catch(b){c=!0,a=b}finally{try{!b&&f.return&&f.return()}finally{if(c)throw a}}}function p(a,b){b.preventDefault();var c=a.vars.wheelX,d=a.vars.wheelY,e=a.vars.wheelSpeedX,f=a.vars.wheelSpeedY,g=0===b.deltaMode?1:16,h=b.deltaX*g,i=b.deltaY*g;if(!a.mouseWheelID)c.reset(h),d.reset(i),e.reset(0),f.reset(0),a.dispatchEvent("wheel-start"),a.mouseWheelID=setTimeout(function(){return q(a)},N);else{c.newValue(h),d.newValue(i),e.newValue(c.average.value),f.newValue(d.average.value);var j;1<e.growth.value&&a.dispatchEvent("wheel-increase-speed-x"),1<f.growth.value&&a.dispatchEvent("wheel-increase-speed-y",{speed:f.value}),(j=e.growth.through(1))&&a.dispatchEvent(-1===j?"wheel-max-speed-x":"wheel-min-speed-x"),(j=f.growth.through(1))&&a.dispatchEvent(-1===j?"wheel-max-speed-y":"wheel-min-speed-y"),clearTimeout(a.mouseWheelID),a.mouseWheelID=setTimeout(function(){return q(a)},N)}}function q(a){a.mouseWheelID=null,a.dispatchEvent("wheel-stop")}function r(a){return new Promise(function(b){setTimeout(b,a)})}function t(a,b){for(var c in"svg"===a&&(a=document.createElementNS(P,"svg"),a.setAttributeNS(P,"width",300),a.setAttributeNS(P,"height",300)),"string"==typeof a&&(a=document.createElementNS(P,a)),b&&b.parent&&(b.parent.insertBefore(a,b.before),delete b.parent,delete b.before),b)null===b[c]||void 0===b[c]?a.removeAttributeNS(null,c):a.setAttributeNS(null,c,b[c]);return a}function s(a){var b,c={},d=!0,e=!1;try{for(var f,g=a.getAttributeNames()[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var h=f.value,i=a.getAttributeNS(null,h);c[h]=/\d$/.test(i)&&!isNaN(i)?parseFloat(i):i}}catch(a){e=!0,b=a}finally{try{!d&&g.return&&g.return()}finally{if(e)throw b}}return c}function u(a,b){for(;a instanceof Element;){if(a.matches(b))return a;a=a.parentNode}return null}var v=function(a){return!!a&&"function"==typeof a[Symbol.iterator]},w=function(a){return"string"==typeof a&&/\s/.test(a)},x=new WeakMap,y={cancelable:!0,priority:0,propagateTo:null},z=function(){function a(b,c,d){for(var e in _classCallCheck(this,a),d=Object.assign({},y,d),Object.defineProperty(this,"target",{value:b}),Object.defineProperty(this,"currentTarget",{writable:!0,value:b}),Object.defineProperty(this,"type",{value:c}),d)Object.defineProperty(this,e,{enumerable:e in y,value:d[e]});Object.defineProperty(this,"canceled",{writable:this.cancelable,value:!1})}return _createClass(a,[{key:"cancel",value:function(){this.cancelable&&(this.canceled=!0)}}]),a}(),A=function(){function a(b,c,d){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;_classCallCheck(this,a),this.count=0,this.array=b,this.array.push(this),this.enabled=!0,this.priority=0,Object.assign(this,e),this.type=c,this.callback=d}return _createClass(a,[{key:"match",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(null!==c&&this.match(a,b)){for(var d in c)if(this[d]!==c[d])return!1;return!0}return null===b?this.type instanceof RegExp?this.type.test(a):this.type instanceof Array?-1!==this.type.indexOf(a):"function"==typeof this.type?this.type(a):this.type===a:this.match(a)&&this.callback===b}},{key:"call",value:function(a){var b;(b=this.callback).call.apply(b,[this.thisArg||a.currentTarget,a].concat(_toConsumableArray(this.args||[]))),this.count++,this.count===this.max&&this.kill()}},{key:"kill",value:function(){var a=this.array.indexOf(this);this.array.splice(a,1),delete this.array,delete this.type,delete this.callback,delete this.options}}]),a}(),B=function a(){_classCallCheck(this,a)};Object.assign(B.prototype,{getAllListeners:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return d(this,a)},clearEventListener:function(){return i(this)},addEventListener:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return f(this,a,b,c)},on:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return f(this,a,b,c)},once:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return g(this,a,b,c)},removeEventListener:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return h(this,a,b,c)},off:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return h(this,a,b,c)},dispatchEvent:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return j(this,a,b)}});var C=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,a),this.value_old=b,this.value=b}return _createClass(a,[{key:"reset",value:function(a){this.value_old=this.value=a}},{key:"newValue",value:function(a){this.value_old=this.value,this.value=a}},{key:"newValueIncrement",value:function(a){this.value_old=this.value,this.value+=a}},{key:"through",value:function(a){var b=this.value-a,c=this.value_old-a;return 0<=b&&0>c?1:0>=b&&0<c?-1:0}}]),a}(),D=function(a){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10;_classCallCheck(this,b);var e=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return e.variableLength=d,e.index=0,e.values=[],e.sum=new C,e.average=new C,e.growth=new C,e.reset(a),c&&(e.derivative=new b(0,c-1,d)),e}return _inherits(b,a),_createClass(b,[{key:"getValues",value:function(){return this.values.slice(this.index).concat(this.values.slice(0,this.index))}},{key:"reset",value:function(a){_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"reset",this).call(this,a),this.index=0,this.sum.reset(a*this.variableLength),this.average.reset(a),this.growth.reset(1);for(var c=0;c<this.variableLength;c++)this.values[c]=a;return this}},{key:"newValue",value:function(a){return _get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"newValue",this).call(this,a),this.sum.newValueIncrement(-this.values[this.index]+this.value),this.average.newValue(this.sum.value/this.variableLength),this.growth.newValue(this.value/this.value_old),this.values[this.index]=a,this.index=(this.index+1)%this.variableLength,this.derivative&&this.derivative.newValue(this.value-this.value_old),this}}]),b}(C),E=function(){function a(){_classCallCheck(this,a),this.string=""}return _createClass(a,[{key:"add",value:function(b){var c,d=this.string?this.string.split(" "):[],a=!0,e=!1;try{for(var f,g,h=b.split(" ")[Symbol.iterator]();!(a=(f=h.next()).done);a=!0)g=f.value,d.includes(g)||d.push(g)}catch(a){e=!0,c=a}finally{try{!a&&h.return&&h.return()}finally{if(e)throw c}}return this.string=d.join(" "),this}},{key:"matches",value:function(b){var c=this.string.split(" ");return b.split(" ").every(function(a){return c.includes(a)})}},{key:"valueOf",value:function(){return this.string}}]),a}(),F=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.tags=new E,a.state=1,a.hasTrigger=!1,a}return _inherits(b,a),_createClass(b,[{key:"set",value:function(a){for(var b in a)this[b]=a[b];return this}},{key:"trigger",value:function(a){this.hasTrigger=!0,this.dispatchEvent(a)}}]),b}(B),G={bound:"bound",trigger:"trigger"},H=0,I=function(a){function b(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"bound",e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.1,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,h=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"";_classCallCheck(this,b);var i=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return i.id="stop-"+H++,i.scroll=a,i.position=c,i.type=d,i.margin=e,i.name=f||i.id,i.color=g,i.tags.add(h),i}return _inherits(b,a),_createClass(b,null,[{key:"Type",get:function(){return G}}]),_createClass(b,[{key:"remove",value:function(){if(!this.scroll)return this;var a=this.scroll.stops.indexOf(this);return scroll.stops.splice(a,1),this}},{key:"toInterval",value:function(a){var b=a.offset,c=a.tags,d=void 0===c?"":c,e=a.stopType,f=void 0===e?void 0:e;return this.scroll.interval({position:this.position,offset:b,stopType:f,tags:d})}}]),b}(F),J=0,K=function(a){function b(a,c,d){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.1,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,h=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"";_classCallCheck(this,b);var i=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return i.id="interval-"+J++,i.scroll=a,i.stopMin=c,i.stopMax=d,i.margin=0*e,i.color=g,i.name=f||i.id,i.tags.add(h),i}return _inherits(b,a),_createClass(b,[{key:"remove",value:function(){if(!this.scroll)return this;var a=this.scroll.intervals.indexOf(this);return scroll.intervals.splice(a,1),this.stopMin.remove(),this.stopMax.remove(),this}},{key:"contains",value:function(a){return this.stopMin.position<=a&&this.stopMax.position>=a}},{key:"overlap",value:function(a){return!(a.stopMin.position>this.stopMax.position||a.stopMax.position<this.stopMin.position)}},{key:"toString",value:function(){return"Interval["+this.stopMin.position+", "+this.stopMax.position+"]"}},{key:"min",get:function(){return this.stopMin.position}},{key:"max",get:function(){return this.stopMax.position}},{key:"width",get:function(){return this.stopMax.position-this.stopMin.position}}]),b}(F),L=[],M=function(a){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=a.autoStart;_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.id="scroll-"+(L.push(d)-1),d._position=0,d._position_new=0,d._position_old=0,d._velocity=0,d._velocity_new=0,d._velocity_old=0,d.friction=1e-3,d.frame=0,d.stops=[],d.intervals=[],d.epsilon=1e-3,d.createStop({position:0}),(void 0===c||c)&&setTimeout(function(){return d.start()},0),d}var c=Math.abs;return _inherits(b,a),_createClass(b,[{key:"start",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.position,c=void 0===b?0:b;this.started=!0,this._position=c,this._position_new=c,this._position_old=Infinity,this.update({force:!0}),this.dispatchEvent("start")}},{key:"clear",value:function(){this.stops=[],this.intervals=[],this.position=0,this.velocity=0,this.createStop({position:0}),this.dispatchEvent("clear")}},{key:"update",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.dt,d=void 0===b?1/60:b,e=a.force;if(this._position_old=this._position_new,this._velocity_old=this._velocity_new,this._velocity_new*=Math.pow(this.friction,d),this._position_new+=(this._velocity_new+this._velocity_old)/2*d,!(void 0!==e&&e)&&c(this._position-this._position_new)<this.epsilon)return this;this._position=this._position_new,this._velocity=this._velocity_new;var f,g=!0,h=!1;try{for(var i,j,k=this.stops[Symbol.iterator]();!(g=(i=k.next()).done);g=!0)j=i.value,m(scroll,j)}catch(a){h=!0,f=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw f}}var l,o=!0,p=!1;try{for(var q,r,s=this.intervals[Symbol.iterator]();!(o=(q=s.next()).done);o=!0)r=q.value,n(scroll,r)}catch(a){p=!0,l=a}finally{try{!o&&s.return&&s.return()}finally{if(p)throw l}}return this.dispatchEvent("update"),this.frame++,this}},{key:"stopByIndex",value:function(a){return this.stops[0>a?this.stops.length+a:a]}},{key:"stopByName",value:function(a){var b,c=!0,d=!1;try{for(var e,f,g=this.stops[Symbol.iterator]();!(c=(e=g.next()).done);c=!0)if(f=e.value,f.name===a)return f}catch(a){d=!0,b=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw b}}return null}},{key:"getStop",value:function(a){var b,d=a.position,e=a.type,f=void 0===e?null:e,g=a.tolerance,h=void 0===g?1e-9:g,i=!0,j=!1;try{for(var k,l,m=this.stops[Symbol.iterator]();!(i=(k=m.next()).done);i=!0)if(l=k.value,(null===f||f===l.type)&&c(l.position-d)<h)return l}catch(a){j=!0,b=a}finally{try{!i&&m.return&&m.return()}finally{if(j)throw b}}return null}},{key:"nearestStop",value:function(a){var b,e=a.position,f=a.type,g=void 0===f?null:f,h={d:Infinity,stop:null},i=!0,j=!1;try{for(var k,l,m=this.stops[Symbol.iterator]();!(i=(k=m.next()).done);i=!0)if(l=k.value,null===g||g===l.type){var n=c(e-l.position);n<h.d&&(h.d=n,h.stop=l)}}catch(a){j=!0,b=a}finally{try{!i&&m.return&&m.return()}finally{if(j)throw b}}return h.stop}},{key:"createStop",value:function(a){var b=a.position,c=a.type,d=void 0===c?"bound":c,e=a.margin,f=void 0===e?.1:e,g=a.name,h=void 0===g?null:g,j=a.color,k=void 0===j?null:j,l=new I(this,b,d,f,h,k),m=0,i=this.stops.length;for(m;m<i&&!(this.stops[m].position>l.position);m++);return this.stops.splice(m,0,l),l}},{key:"intervalById",value:function(a){var b,c=!0,d=!1;try{for(var e,f,g=this.intervals[Symbol.iterator]();!(c=(e=g.next()).done);c=!0)if(f=e.value,f.id===a)return f}catch(a){d=!0,b=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw b}}return null}},{key:"getIntervals",value:function(b){var c=b.position,d=b.selector,e=void 0===d?null:d,f=this.intervals.filter(function(a){return a.contains(c)});return e?f.filter(function(a){return a.tags.matches(e)}):f}},{key:"getInterval",value:function(a){return this.getIntervals(a)[0]}},{key:"intervalByMinMax",value:function(a,b){var d,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e-9,f=!0,g=!1;try{for(var h,i,j=this.intervals[Symbol.iterator]();!(f=(h=j.next()).done);f=!0)if(i=h.value,c(i.min-a)<e&&c(i.max-b)<e)return i}catch(a){g=!0,d=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw d}}return null}},{key:"createInterval",value:function(a){var b,c,d=a.min,e=a.max,f=a.stopType,g=void 0===f?"trigger":f,h=a.margin,i=void 0===h?.1:h,j=a.color,k=void 0===j?null:j,l=a.name,m=void 0===l?null:l,n=a.tags,o=void 0===n?"":n;b=this.createStop({position:d,type:g}),c=this.createStop({position:e,type:g});var p=new K(this,b,c,i,m,k,o);return this.intervals.push(p),p}},{key:"shoot",value:function(){var a=Math.log,b=this.position-this.velocity/a(this.friction),c=this.nearestStop({position:b,type:G.bound});this.velocity=(this.position-c.position)*a(this.friction)}},{key:"interval",value:function(a){var b=a.min,c=a.max,d=a.position,e=a.width,f=a.offset,g=void 0===f?0:f,h=a.stopType,i=void 0===h?"trigger":h,j=a.color,k=void 0===j?null:j,l=a.tags,m=void 0===l?"":l;if(isNaN(d)||isNaN(e)||(b=d,c=d+e),!isNaN(d)&&0<g&&(b=d,c=d),isNaN(b)||isNaN(c))return console.log("p-scroll.js: Scroll().interval unable to parse min & max values:",b,c),null;b+=-g,c+=g;var n=this.intervalByMinMax(b,c)||this.createInterval({min:b,max:c,stopType:i,color:k,tags:m});return n}},{key:"stop",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:G.bound;"string"==typeof a&&"+="===a.slice(0,2)&&(a=(this.stops.length?this.stops[this.stops.length-1].position:0)+parseFloat(a.slice(2)));var c=this.getStop({position:a,type:b})||this.createStop({position:a,type:b});return c}},{key:"trigger",value:function(a){return this.stop(a,I.Type.trigger)}},{key:"position",get:function(){return this._position},set:function(a){this._position_new=a}},{key:"velocity",get:function(){return this._velocity},set:function(a){this._velocity_new=a}}]),b}(B);o();var N=120,O=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return"string"==typeof a&&(a=document.querySelector(a)),c.vars={wheelX:new D(0,0,10),wheelY:new D(0,0,10),wheelSpeedX:new D(0,2,10),wheelSpeedY:new D(0,2,10)},a.addEventListener("wheel",function(a){return p(c,a)}),c}return _inherits(b,a),b}(B),P="http://www.w3.org/2000/svg",Q={position:"fixed",top:0,left:0,width:"100%","z-index":100,"font-family":"monospace","font-size":10},R=function(){function a(b){var c=this;_classCallCheck(this,a),this.scrollSVG=b,this.g=t("g",{parent:b.g,class:"tooltip",fill:"var(--color)",stroke:"none",visibility:"hidden"}),this.g.style.setProperty("transition","opacity .2s"),this.rect=t("rect",{parent:this.g,x:0,y:0,width:160,height:50,rx:5,ry:5}),this.name=t("text",{parent:this.g,fill:"white",stroke:"none",x:80,y:14,"text-anchor":"middle"}),this.range=t("text",{parent:this.g,fill:"white",stroke:"none",x:80,y:28,"text-anchor":"middle"}),this.info=t("text",{parent:this.g,fill:"white",stroke:"none",x:80,y:42,"text-anchor":"middle"}),this.scrollSVG.g.addEventListener("mouseover",function(a){if(!u(a.target,"g.tooltip")){var b=u(a.target,"g.interval");c.setTarget(b)}}),this.scrollSVG.svg.addEventListener("mouseleave",function(){return c.setTarget(null)})}return _createClass(a,[{key:"setTarget",value:async function(a){if(!(this.target===a||this.isWaiting)){if(this.target){var b=this.scrollSVG.scroll.intervalById(this.target.dataset.id);b.off("update",this.intervalOnUpdate),this.g.style.setProperty("opacity",0),this.target.style.removeProperty("stroke-width"),this.isWaiting=!0,await r(100),this.isWaiting=!1}if(this.target=a,t(this.g,{visibility:this.target?"visible":"hidden"}),!!this.target){var c=this.scrollSVG.scroll.intervalById(this.target.dataset.id);c.on("update",this.intervalOnUpdate,{thisArg:this}),this.g.style.setProperty("opacity",1),this.target.style.setProperty("stroke-width",3),this.name.innerHTML=c.name,this.range.innerHTML=c.min.toFixed(1)+" - "+c.max.toFixed(1),this.info.innerHTML="local: "+c.local.toFixed(2)+", state: "+c.state,t(this.rect,{fill:c.color});var d=s(this.target.querySelector("line")),e=(d.x1+d.x2)/2-80,f=(d.y1+d.y2)/2+8;t(this.g,{transform:"translate("+e+", "+f+")"})}}}},{key:"intervalOnUpdate",value:function(a){var b=a.target;this.info.innerHTML="local: "+b.local.toFixed(2)+", state: "+b.state}}]),a}(),S=function(){function a(b){for(var c in _classCallCheck(this,a),this.options=Object.assign({scale:1,color:"red"},b),this.svg=t("svg"),Q)this.svg.style.setProperty(c,Q[c]);this.svg.style.setProperty("--color",this.options.color),this.g=t("g",{parent:this.svg,fill:"none",stroke:this.options.color,transform:"translate(20, 20)"}),this.tooltip=new R(this),this.options.scroll&&this.init(this.options.scroll)}return _createClass(a,[{key:"init",value:function(a){var b=this;this.scroll=a,this.scroll.on("clear",function(){for(;b.g.firstChild;)b.g.firstChild.remove();b.draw()}),this.draw()}},{key:"draw",value:function(){var c=this,d=this.options.scale;this.line=t("line",{parent:this.g,before:this.tooltip.g,x1:this.scroll.stopByIndex(0).position*d,x2:this.scroll.stopByIndex(-1).position*d,y1:0,y2:0});var a=t("line",{parent:this.g,before:this.tooltip.g,x1:this.scroll.position*d||0,x2:this.scroll.position*d||0,y1:-5,y2:5,"stroke-width":3});this.scroll.on("update",function(){t(a,{x1:c.scroll.position*d,x2:c.scroll.position*d})}),this.stops=this.scroll.stops.map(function(a){var b=a.type===G.bound?5:1.5;return t("line",{parent:c.g,before:c.tooltip.g,stroke:a.color,x1:a.position*d,x2:a.position*d,y1:-b,y2:b})});var e=[];return this.intervals=this.scroll.intervals.map(function(f){for(var h,a=0;h=e[a];a++){var i=!1,j=!0,k=!1,l=void 0;try{for(var m,n,b=h[Symbol.iterator]();!(j=(m=b.next()).done);j=!0)n=m.value,i=i||n.overlap(f)}catch(a){k=!0,l=a}finally{try{!j&&b.return&&b.return()}finally{if(k)throw l}}if(!i)break}e[a]?e[a].push(f):e[a]=[f];var o=20+12*a,p=t("g",{parent:c.g,before:c.tooltip.g,class:"interval","data-id":f.id,stroke:f.color});p.dataset.interval=f.min+","+f.max;var q=t("line",{parent:p,x1:f.min*d,x2:f.max*d,y1:o,y2:o}),r=f.min+f.width*(f.local||0);r=(r*d).toFixed(2);var s=t("line",{parent:p,x1:r,x2:r,y1:o-5,y2:o+5}),u=t("rect",{parent:p,stroke:"none",fill:"transparent",x:f.min*d,y:o-5,width:f.width*d,height:10});return f.on(/enter|exit/,function(){t(p,{"stroke-width":f.state?null:3})}),f.on("update",function(){var a=f.min+f.width*f.local;a=(a*d).toFixed(2),t(s,{x1:a,x2:a})}),p}),this}}]),a}();return a.Tags=E,a.Stop=I,a.Interval=K,a.Scroll=M,a.ScrollHandler=O,a.ScrollSVG=S,a}({});
